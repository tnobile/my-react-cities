(this["webpackJsonpmy-react-cities"]=this["webpackJsonpmy-react-cities"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){},21:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r.n(a),n=r(10),o=r.n(n),s=(r(15),r(16),r(3)),l=r.n(s),i=r(7),u=r(4),d="https://tnobile.github.io/data-world-cities/",j=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,a,c,n,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:100,e.next=3,fetch(d+t);case 3:if((a=e.sent).ok){e.next=7;break}throw c="An error has occured: ".concat(a.status),new Error(c);case 7:return e.next=9,a.json();case 9:if(n=e.sent,!(r<=0)){e.next=12;break}return e.abrupt("return",n);case 12:return e.abrupt("return",n.filter((function(e,t){return t<r})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(2),h=r(5),p=r(8),O=r.n(p),m=r(0);function g(e){var t=e.preGlobalFilteredRows,r=e.globalFilter,c=e.setGlobalFilter,n=t.length,o=Object(a.useState)(r),s=Object(u.a)(o,2),l=s[0],i=s[1],d=Object(h.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(m.jsx)("input",{value:l||"",onChange:function(e){i(e.target.value),d(e.target.value)},placeholder:"Global search with ".concat(n," records...")})}var f=function(e){var t=e.columns,r=e.data,c=Object(h.useTable)({columns:t,data:r},h.useFilters,h.useGlobalFilter,h.useSortBy),n=c.getTableProps,o=c.getTableBodyProps,s=c.headerGroups,l=c.rows,i=c.prepareRow,d=c.setFilter,j=c.state,p=c.preGlobalFilteredRows,f=c.setGlobalFilter,x=Object(a.useState)(""),v=Object(u.a)(x,2),C=v[0],w=v[1];return Object(a.useEffect)((function(){console.log("data changed")}),[r]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:O.a.searchRow,children:[Object(m.jsx)("div",{className:O.a.searchColumn,children:Object(m.jsx)("input",{value:C,onChange:function(e){var t=e.target.value||void 0;d("city",t),w(t)},placeholder:"Search city name"})}),Object(m.jsx)("div",{className:O.a.searchColumn,children:Object(m.jsx)(g,{preGlobalFilteredRows:p,globalFilter:j.globalFilter,setGlobalFilter:f})})]}),Object(m.jsxs)("table",Object(b.a)(Object(b.a)({},n()),{},{children:[Object(m.jsx)("thead",{children:s.map((function(e){return Object(m.jsx)("tr",Object(b.a)(Object(b.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsx)("th",Object(b.a)(Object(b.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:e.render("Header")}))}))}))}))}),Object(m.jsx)("tbody",Object(b.a)(Object(b.a)({},o()),{},{children:l.map((function(e,t){return i(e),Object(m.jsx)("tr",Object(b.a)(Object(b.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(m.jsx)("td",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})},x=r(6),v=r.n(x),C=new Intl.NumberFormat,w=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),r=t[0],c=t[1],n=Object(a.useState)("gb"),o=Object(u.a)(n,2),s=o[0],d=o[1];Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(s,100);case 2:t=e.sent,console.log("got ".concat(t.length,"  for ").concat(s)),c(t);case 5:case"end":return e.stop()}}),e)})))().catch((function(e){c([]),console.error("".concat(e.name,":").concat(e.message))}))}),[s]);var b=Object(a.useMemo)((function(){return[{Header:"Cities",columns:[{Header:"Name",accessor:"city"},{Header:"Name(admin)",accessor:"admin_name"},{Header:"Country",accessor:"country"},{Header:"Code",accessor:"iso2",id:"flag",Cell:function(e){var t=e.cell.value;return Object(m.jsx)("span",{className:"badge",children:t})}},{Header:"Flag",accessor:"iso2",Cell:function(e){return function(e){switch(e){case"ES":return"\ud83c\uddea\ud83c\uddf8";case"JP":return"\ud83c\uddef\ud83c\uddf5";case"GB":return"\ud83c\uddec\ud83c\udde7";case"AR":return"\ud83c\udde6\ud83c\uddf7";case"CN":return"\ud83c\udde8\ud83c\uddf3";case"CH":return"\ud83c\udde8\ud83c\udded";case"IT":return"\ud83c\uddee\ud83c\uddf9";case"FR":return"\ud83c\uddeb\ud83c\uddf7";case"US":return"\ud83c\uddfa\ud83c\uddf8";case"DE":return"\ud83c\udde9\ud83c\uddea";default:return e}}(e.cell.value)}},{Header:"Capital",accessor:"capital"}]},{Header:"Details",columns:[{Header:"Population",accessor:"population",style:{"text-align":"right",color:"pink",background:"green"},Cell:function(e){var t=e.cell.value;return C.format(t)}},{Header:"Population(Proper)",accessor:"population_proper",Cell:function(e){return Object(m.jsx)("div",{style:{textAlign:"right",color:"purple",background:"lightblue"},children:C.format(e.cell.value)})}},{Header:"Latitude",accessor:"lat"},{Header:"Longitudo",accessor:"lng"}]}]}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:v.a.topRow,children:[Object(m.jsx)("div",{className:v.a.topColumn,children:"Country/City Data"}),Object(m.jsx)("div",{className:v.a.topColumn,children:Object(m.jsxs)("select",{className:v.a.selector,name:"country",defaultValue:s,onChange:function(e){d(e.target.value)},children:[Object(m.jsx)("option",{value:"jp",name:"jp",children:"Japan"}),Object(m.jsx)("option",{value:"gb",name:"gb",children:"UK"}),Object(m.jsx)("option",{value:"ch",name:"ch",children:"Switzerland"}),Object(m.jsx)("option",{value:"ar",name:"ar",children:"Argentina"}),Object(m.jsx)("option",{value:"cn",name:"cn",children:"China"}),Object(m.jsx)("option",{value:"de",name:"de",children:"Germany"}),Object(m.jsx)("option",{value:"es",name:"es",children:"Spain"}),Object(m.jsx)("option",{value:"fr",name:"fr",children:"France"})]})}),Object(m.jsx)("div",{className:v.a.topColumn,children:Object(m.jsx)("a",{href:"https://tnobile.github.io/data-world-cities/",children:"source"})})]}),r&&r.length>0&&Object(m.jsx)(f,{columns:b,data:r}),r&&0===r.length&&Object(m.jsxs)("h2",{children:["No data for ",s]})," "]})};r(20);var F=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(w,{})})},y=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,22)).then((function(t){var r=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,o=t.getTTFB;r(e),a(e),c(e),n(e),o(e)}))};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root")),y()},6:function(e,t,r){e.exports={selector:"Home_selector__2VNFS",source:"Home_source__13bXq",topColumn:"Home_topColumn__1oQlN",topRow:"Home_topRow__9XaAO"}},8:function(e,t,r){e.exports={searchColumn:"Table_searchColumn__3gpz4",searchRow:"Table_searchRow__1qrvC"}}},[[21,1,2]]]);
//# sourceMappingURL=main.d57ba869.chunk.js.map