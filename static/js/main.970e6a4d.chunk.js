(this["webpackJsonpmy-react-cities"]=this["webpackJsonpmy-react-cities"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(10),o=n.n(r),s=(n(15),n(16),n(3)),l=n.n(s),i=n(8),u=n(4),b="https://tnobile.github.io/data-world-cities/",d=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a,c,r,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:100,e.next=3,fetch(b+t);case 3:if((a=e.sent).ok){e.next=7;break}throw c="An error has occured: ".concat(a.status),new Error(c);case 7:return e.next=9,a.json();case 9:if(r=e.sent,!(n<=0)){e.next=12;break}return e.abrupt("return",r);case 12:return e.abrupt("return",r.filter((function(e,t){return t<n})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(2),h=n(5),p=n(6),g=n.n(p),O=n(0);function m(e){var t=e.preGlobalFilteredRows,n=(e.globalFilter,e.setGlobalFilter),a=e.globalFilterInput,c=e.setGlobalFilterInput,r=t.length,o=Object(h.useAsyncDebounce)((function(e){n(e||void 0)}),200);return Object(O.jsx)("input",{value:a||"",onChange:function(e){c(e.target.value),o(e.target.value)},placeholder:"Global search with ".concat(r," records...")})}var f=function(e){var t=e.columns,n=e.data,c=Object(h.useTable)({columns:t,data:n,initialState:{pageIndex:2}},h.useFilters,h.useGlobalFilter,h.useSortBy,h.usePagination),r=c.getTableProps,o=c.getTableBodyProps,s=c.headerGroups,l=c.prepareRow,i=c.page,b=c.canPreviousPage,d=c.canNextPage,p=c.pageOptions,f=c.pageCount,x=c.gotoPage,v=c.nextPage,C=c.previousPage,w=c.setPageSize,F=c.state,y=F.pageIndex,N=F.pageSize,P=F.globalFilter,_=c.setFilter,S=c.preGlobalFilteredRows,H=c.setGlobalFilter,k=Object(a.useState)(""),G=Object(u.a)(k,2),R=G[0],I=G[1],T=Object(a.useState)(""),A=Object(u.a)(T,2),B=A[0],D=A[1],E=Object(a.useState)(0),z=Object(u.a)(E,2),J=z[0],L=z[1];Object(a.useEffect)((function(){I(""),D(""),L(n.length),w(10),x(0),console.log("data changed with ".concat(n.length," rows"))}),[n,x,w]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:g.a.searchRow,children:[Object(O.jsx)("div",{className:g.a.searchColumn,children:Object(O.jsx)("input",{value:R,onChange:function(e){var t=e.target.value||void 0;_("city",t),I(t)},placeholder:"Search city name"})}),Object(O.jsx)("div",{className:g.a.searchColumn,children:Object(O.jsx)(m,{preGlobalFilteredRows:S,globalFilter:P,setGlobalFilter:H,setGlobalFilterInput:D,globalFilterInput:B})}),Object(O.jsx)("button",{className:g.a.btnReset,onClick:function(){I(""),D(""),_("city",void 0),H(void 0)},children:"reset"})]}),Object(O.jsxs)("table",Object(j.a)(Object(j.a)({},r()),{},{children:[Object(O.jsx)("thead",{children:s.map((function(e){return Object(O.jsx)("tr",Object(j.a)(Object(j.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(O.jsx)("th",Object(j.a)(Object(j.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:e.render("Header")}))}))}))}))}),Object(O.jsx)("tbody",Object(j.a)(Object(j.a)({},o()),{},{children:i.map((function(e,t){return l(e),Object(O.jsx)("tr",Object(j.a)(Object(j.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(O.jsx)("td",Object(j.a)(Object(j.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]})),Object(O.jsxs)("div",{className:g.a.pagination,children:[Object(O.jsx)("button",{onClick:function(){return x(0)},disabled:!b,children:"<<"})," ",Object(O.jsx)("button",{onClick:function(){return C()},disabled:!b,children:"<"})," ",Object(O.jsx)("button",{onClick:function(){return v()},disabled:!d,children:">"})," ",Object(O.jsx)("button",{onClick:function(){return x(f-1)},disabled:!d,children:">>"})," ",Object(O.jsxs)("span",{children:["Page"," ",Object(O.jsxs)("strong",{children:[y+1," of ",p.length]})," "]}),Object(O.jsxs)("span",{children:["| Go to page:"," ",Object(O.jsx)("input",{type:"number",value:y+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;x(t)},style:{width:"100px"}})]})," ",Object(O.jsx)("select",{value:N,onChange:function(e){w(Number(e.target.value))},children:[10,20,30,40,50,J].map((function(e){return Object(O.jsxs)("option",{value:e,children:["Show ",e]},e)}))}),Object(O.jsx)("button",{onClick:function(e){w(J===N?10:J)},children:J===N?"Paginate":"Show All "+J})]})]})},x=n(7),v=n.n(x),C=new Intl.NumberFormat,w=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("gb"),o=Object(u.a)(r,2),s=o[0],b=o[1];Object(a.useEffect)((function(){Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(s,1e3);case 2:t=e.sent,console.log("got ".concat(t.length,"  for ").concat(s)),c(t);case 5:case"end":return e.stop()}}),e)})))().catch((function(e){c([]),console.error("".concat(e.name,":").concat(e.message))}))}),[s]);var j=Object(a.useMemo)((function(){return[{Header:"Cities",columns:[{Header:"Name",accessor:"city"},{Header:"Name(admin)",accessor:"admin_name"},{Header:"Country",accessor:"country"},{Header:"Code",accessor:"iso2",id:"flag",Cell:function(e){var t=e.cell.value;return Object(O.jsx)("span",{className:"badge",children:t})}},{Header:"Flag",accessor:"iso2",Cell:function(e){return function(e){switch(e){case"ES":return"\ud83c\uddea\ud83c\uddf8";case"JP":return"\ud83c\uddef\ud83c\uddf5";case"GB":return"\ud83c\uddec\ud83c\udde7";case"AR":return"\ud83c\udde6\ud83c\uddf7";case"CN":return"\ud83c\udde8\ud83c\uddf3";case"CH":return"\ud83c\udde8\ud83c\udded";case"IT":return"\ud83c\uddee\ud83c\uddf9";case"FR":return"\ud83c\uddeb\ud83c\uddf7";case"US":return"\ud83c\uddfa\ud83c\uddf8";case"DE":return"\ud83c\udde9\ud83c\uddea";default:return e}}(e.cell.value)}},{Header:"Capital",accessor:"capital"}]},{Header:"Details",columns:[{Header:"Population",accessor:"population",style:{"text-align":"right",color:"pink",background:"green"},Cell:function(e){var t=e.cell.value;return C.format(t)}},{Header:"Population(Proper)",accessor:"population_proper",Cell:function(e){return Object(O.jsx)("div",{style:{textAlign:"right",color:"purple",background:"lightblue"},children:C.format(e.cell.value)})}},{Header:"Latitude",accessor:"lat"},{Header:"Longitudo",accessor:"lng"}]}]}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:v.a.topRow,children:[Object(O.jsx)("div",{className:v.a.topColumn,children:"Country/City Data"}),Object(O.jsx)("div",{className:v.a.topColumn,children:Object(O.jsxs)("select",{className:v.a.selector,name:"country",defaultValue:s,onChange:function(e){b(e.target.value)},children:[Object(O.jsx)("option",{value:"jp",name:"jp",children:"Japan"}),Object(O.jsx)("option",{value:"gb",name:"gb",children:"UK"}),Object(O.jsx)("option",{value:"ch",name:"ch",children:"Switzerland"}),Object(O.jsx)("option",{value:"ar",name:"ar",children:"Argentina"}),Object(O.jsx)("option",{value:"cn",name:"cn",children:"China"}),Object(O.jsx)("option",{value:"de",name:"de",children:"Germany"}),Object(O.jsx)("option",{value:"es",name:"es",children:"Spain"}),Object(O.jsx)("option",{value:"fr",name:"fr",children:"France"})]})}),Object(O.jsx)("div",{className:v.a.topColumn,children:Object(O.jsx)("a",{href:"https://tnobile.github.io/data-world-cities/",children:"source"})})]}),n&&n.length>0&&Object(O.jsx)(f,{columns:j,data:n}),n&&0===n.length&&Object(O.jsxs)("h2",{children:["No data for ",s]})," "]})};n(20);var F=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(w,{})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(F,{})}),document.getElementById("root")),y()},6:function(e,t,n){e.exports={searchColumn:"Table_searchColumn__3gpz4",searchRow:"Table_searchRow__1qrvC",pagination:"Table_pagination__NYyU4"}},7:function(e,t,n){e.exports={selector:"Home_selector__2VNFS",source:"Home_source__13bXq",topColumn:"Home_topColumn__1oQlN",topRow:"Home_topRow__9XaAO"}}},[[21,1,2]]]);
//# sourceMappingURL=main.970e6a4d.chunk.js.map